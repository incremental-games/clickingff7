<div class="part w300">
  <div>{{game.zone.name}} (<em>#{{game.zone.level}}</em>)</div>
  <div><span class="label">gils</span> <strong>{{game.total_gils|floor}}</strong></span></div>
</div><!--

--><div class="part w300">
  <div ng-if="game.zone.img"><img ng-src="img/zones/{{game.zone.img}}" width="100" /></div>
  <div ng-click="next_zone()" class="button" ng-class="{disabled: !game.can_next_zone()}" data-step="11" data-intro="Well, that's all. Now try your best to go to the next zone. Tip: you have to unlock the boss enemy and win the battle ;)">Go next zone</div>
</div><!--

--><div class="part w300">
  <div class="button" ng-click="help()" ng-class="{disabled: game.fight}">HOW TO PLAY</div>
</div>

<div class="space"></div>

<div class="part title w400">Enemy</div>
<div class="part title w50">VS</div>
<div class="part title w400">Characters</div>

<div class="space"></div>

<div class="part title w50"></div>
<div class="part message w400">{{game.message}}</div>
<div class="part title w50"></div>

<div class="space"></div>

<div class="part w400">

  <section class="enemies" data-step="2" data-intro="This is the enemy ! They are ordered by level. So, you should fight the first one to begin, then the second, etc." data-position="right">
    <div ng-repeat="(no, e) in game.enemy | clean" class="left div400 enemy" ng-class="{disabled: e.hp <= 0, active: e.active}">
      <div class="atb_progress" style="width:{{e.atb_progress(400)}}px;" ng-class="{active: e.atb_active}" ng-hide="e.hp==0"></div>
      <div class="part avatar w50">
        <img ng-src="img/enemy/{{e.image}}" alt="avatar" height="48" />
      </div>
      <div class="part infos w300">
        {{e.name}} <strong>(LVL{{e.level|ceil}})</strong> 
        <span ng-if="e.boss">
          <span class="boss">BOSS</span> 
        </span>
        <strong ng-show="e.number > 0">x{{e.number}}</strong>
        <div>
          <span class="label">hp</span> {{e.hp}} / {{e.hp_max}} 
          <span class="label">att</span> {{e.get_pwr()|round:2}}
        </div>
      </div>
    </div>

    <div class="button" ng-click="explore()" ng-show="game.mode=='normal'">EXPLORE</div>
    <div class="button" ng-click="getRewards()" ng-show="game.mode=='rewards'">GET REWARDS</div>
  </sections>

</div><!--

--><div class="part title w50"></div><!--

--><div class="part w400">

  <section class="characters" data-step="1" data-intro="This is your team ! You begin with 2 characters. If they win battles, characters will level up and get stronger." data-position="left">
    <div ng-repeat="(i, character) in game.getCharacters()" class="right div400 character" ng-class="{disabled: character.hp <= 0, active: character.active}">
      <div class="atb_progress" style="width:{{character.atb_progress(400)}}px;" ng-class="{active: character.atb_active}" ng-hide="character.hp==0"></div>
      <div class="limit_progress" style="width:{{character.limit_progress(400)}}px;"></div>
      <div class="xp_progress" style="width:{{character.xp_progress(400)}}px;"></div>
      <div class="part avatar w50">
        <img ng-src="img/characters/{{character.image}}" alt="avatar" />
      </div><!--
      --><div class="part infos w300">
        <div>{{character.name}} <strong>(LVL{{character.level}})</strong></div>
        <div>
          <span class="label">hp</span> {{character.hp}} / {{character.get_hp_max()}} 
          <span class="label">mp</span> {{character.mp}} / {{character.get_mp_max()}} 
          <span class="label">xp</span> {{character.xp}} / {{character.xp_max}} 
          <span class="label">att</span> {{character.get_pwr()|round:2}}
        </div>
        <div class="actions">
           
            {{character.ability.name()}} <span ng-click="open_abilities($event)">v</span> 
            <div class="list">
              <div ng-repeat="ability in character.abilities">
                <a ng-click="choose_ability($event, character, ability)">{{ability.name()}}</a>
              </div>
            </div>

            {{character.ability.target.name()}} <span ng-click="open_targets($event)">v</span> 
            <div class="list">
              <div ng-repeat="target in character.ability.targets">
                <a ng-click="choose_target($event, character, target)">{{target.name()}}</a>
              </div>
            </div>
        </div>
      </div>
    </div>
  </sections>

</div>